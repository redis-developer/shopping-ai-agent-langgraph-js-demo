<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>{{product.name}} - {{app_name}}</title>
    <link rel="stylesheet" href="../stylesheets/chat.css" media="screen,print" >
    <link rel="stylesheet" href="../stylesheets/product.css" media="screen,print" >
    <link rel="icon" href="../images/redis-avatar.png" type="image/png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700;800;900&family=Space+Grotesk:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

    <meta name="description" content="{{product.description}}">
    <meta property="og:title" content="{{product.name}} - {{app_name}}">
    <meta property="og:description" content="{{product.description}}">
</head>
<body class="neo-brutalist-theme">
    <!-- Header -->
    <header class="brutal-header">
        <div class="brutal-header-container">
            <div class="brutal-logo-section">
                <h1 class="brutal-site-logo">
                    <i class="fas fa-shopping-basket"></i>
                    <a href="/app">{{app_name}}</a>
                </h1>
            </div>
            
            <div class="brutal-header-actions">
                <button onclick="history.back()" class="brutal-back-btn">
                    <i class="fas fa-arrow-left"></i> BACK
                </button>
                <div class="brutal-cart-info">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="brutal-cart-count">0</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Product Details -->
    <main class="brutal-product-container">
        <article class="brutal-product-detail">
            <figure class="brutal-product-image-section">
                <div class="brutal-product-main-image">
                    <!-- Fallback emoji based on category -->
                    <span class="brutal-product-emoji">
                        {{#if (eq product.category "Fruits & Vegetables")}}ü•¨{{/if}}
                        {{#if (eq product.category "Bakery & Dairy")}}ü•õ{{/if}}
                        {{#if (eq product.category "Meat & Seafood")}}üêü{{/if}}
                        {{#if (eq product.category "Grains & Pulses")}}üåæ{{/if}}
                        {{#if (eq product.category "Snacks & Beverages")}}üç™{{/if}}
                        {{#unless product.category}}üõí{{/unless}}
                    </span>
                </div>
            </figure>

            <div class="brutal-product-info-section" data-product-id="{{product.id}}" data-product-category="{{product.category}}">
                <header class="brutal-product-header">
                    <h2 class="brutal-product-title">{{product.name}}</h2>
                    {{#if product.brand}}
                        <p class="brutal-product-brand">BY {{product.brand}}</p>
                    {{/if}}
                    
                    <div class="brutal-product-badges">
                        <span class="brutal-category-badge">{{product.category}}</span>
                        {{#if product.subCategory}}
                            <span class="brutal-subcategory-badge">{{product.subCategory}}</span>
                        {{/if}}
                        {{#if product.type}}
                            <span class="brutal-type-badge">{{product.type}}</span>
                        {{/if}}
                    </div>
                </header>

            <section class="brutal-product-rating" aria-label="Product Rating">
                    {{#if product.rating}}
                        <div class="brutal-rating-stars">
                            {{#repeat product.rating}}‚≠ê{{/repeat}}
                            <span class="brutal-rating-text">{{product.rating}}/5</span>
                        </div>
                    {{/if}}
            </section>

            <section class="brutal-product-pricing" aria-label="Pricing Information">
                    <div class="brutal-price-section">
                        <data class="brutal-current-price" value="{{product.salePrice}}">‚Çπ{{product.salePrice}}</data>
                        
                    </div>
                    {{#if product.isOnSale}}
                        <div class="brutal-sale-banner">üî• ON SALE!</div>
                    {{/if}}
            </section>

                {{#if product.description}}
                    <section class="brutal-product-description" aria-labelledby="description-heading">
                        <h3 id="description-heading">DESCRIPTION</h3>
                        <p>{{product.description}}</p>
                    </section>
                {{/if}}

                <form class="brutal-product-actions" aria-label="Add to Cart">
                    <fieldset class="brutal-quantity-section">
                        <legend>QUANTITY:</legend>
                        <div class="brutal-quantity-controls">
                            <button type="button" class="brutal-quantity-btn" data-quantity-change="-1">-</button>
                            <input type="number" id="quantity" value="1" min="1" max="10" aria-label="Quantity">
                            <button type="button" class="brutal-quantity-btn" data-quantity-change="1">+</button>
                        </div>
                    </fieldset>
                    
                    <button type="submit" class="brutal-add-to-cart-btn">
                        <i class="fas fa-shopping-cart"></i>
                        ADD TO CART
                    </button>
                </form>
            </div>
        </article>

        <!-- Related Products Section -->
        <aside class="brutal-related-products" aria-labelledby="related-heading">
            <h3 id="related-heading">YOU MIGHT ALSO LIKE</h3>
            <div id="related-products-grid" class="brutal-products-grid" role="list">
                <!-- Related products will be loaded here -->
            </div>
        </aside>
    </main>

    <!-- Success/Error Messages -->
    <div id="notification-container"></div>

    <script src="/javascripts/index-product.js" type="module"></script>
</body>
</html>